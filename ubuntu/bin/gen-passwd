#!/bin/bash

ALPHA_NUMERIC="A-Za-z0-9"
ALPHA_NUMERIC_PLUS_SYMBOLS="A-Za-z0-9\.\!\?\$#%@^&"

LENGTH="20"
CHARACTER_SET="$ALPHA_NUMERIC"

usage() {
    echo "usage: $(basename $0) [-l <length>]"
}


while getopts ":l:sh" opt; do
  case ${opt} in
    l )
      LENGTH="$OPTARG"
      ;;
    s )
      CHARACTER_SET="$ALPHA_NUMERIC_PLUS_SYMBOLS"
      ;;
    h )
      usage
      exit 0
      ;;
    \? )
      echo "Invalid option: $OPTARG" 1>&2
      usage
      exit 1
      ;;
    : )
      echo "Invalid option: $OPTARG requires an argument" 1>&2
      usage
      exit 1
      ;;
  esac
done
shift $((OPTIND -1))

< /dev/urandom tr -dc $CHARACTER_SET | head -c$LENGTH; echo
